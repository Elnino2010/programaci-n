<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ArqueoLab Pro - Registro Asistido</title>
    <style>
        :root { 
            --primary: #2e7d32; 
            --bg: #f4f7f4; 
            --accent: #f57c00;
        }
        
        body { background-color: var(--bg); font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; }
        
        .wizard-container { 
            max-width: 800px; 
            margin: 40px auto; 
            background: white; 
            border-radius: 15px; 
            box-shadow: 0 10px 40px rgba(0,0,0,0.1); 
            overflow: hidden; 
        }

        /* Indicador de Progreso */
        .progress-bar { 
            display: flex; 
            background: #eee; 
            height: 5px; 
        }
        .progress-fill { 
            background: var(--primary); 
            width: 25%; 
            transition: 0.5s; 
        }

        .step-content { padding: 40px; display: none; min-height: 450px; }
        .step-content.active { display: block; animation: slideIn 0.3s ease-out; }

        @keyframes slideIn { from { opacity: 0; transform: translateX(20px); } to { opacity: 1; transform: translateX(0); } }

        h2 { color: var(--primary); margin-top: 0; border-bottom: 2px solid #f0f0f0; padding-bottom: 10px; }
        
        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px; }
        .full-width { grid-column: span 2; }

        label { display: block; font-size: 0.8rem; font-weight: bold; color: #666; margin-bottom: 5px; text-transform: uppercase; }
        input, select, textarea { 
            width: 100%; padding: 12px; border: 1px solid #ddd; 
            border-radius: 8px; font-size: 1rem; box-sizing: border-box;
        }

        /* Navegaci√≥n Inferior */
        .wizard-footer { 
            padding: 20px 40px; 
            background: #f9f9f9; 
            display: flex; 
            justify-content: space-between; 
            border-top: 1px solid #eee;
        }

        .btn { 
            padding: 12px 30px; 
            border-radius: 25px; 
            border: none; 
            font-weight: bold; 
            cursor: pointer; 
            transition: 0.3s; 
        }
        .btn-next { background: var(--primary); color: white; }
        .btn-next:hover { background: #1b5e20; transform: translateY(-2px); }
        .btn-prev { background: #ccc; color: #333; }
        .btn-prev:disabled { opacity: 0; cursor: default; }

        /* Tabla de Resultados */
        .history-section { max-width: 800px; margin: 40px auto 60px; padding: 0 20px; }
        table { width: 100%; border-collapse: collapse; background: white; border-radius: 10px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        th { background: #2e7d32; color: white; padding: 15px; text-align: left; font-size: 0.8rem; text-transform: uppercase; }
        td { padding: 12px 15px; border-bottom: 1px solid #eee; font-size: 0.9rem; vertical-align: middle; }
        
        .thumb-img { width: 50px; height: 50px; border-radius: 6px; object-fit: cover; border: 1px solid #eee; }
        .status-tag { padding: 4px 8px; border-radius: 4px; font-size: 0.75rem; font-weight: bold; }
        .tag-finalizado { background: #e8f5e9; color: #2e7d32; }
    </style>
</head>
<body>

<nav style="background: var(--primary); color: white; padding: 15px 5%; text-align: center; font-weight: bold;">
    üìä ARQUEOLAB PRO | Registro Asistido de Campo
</nav>

<div class="wizard-container">
    <div class="progress-bar"><div class="progress-fill" id="progress"></div></div>

    <form id="arqueoForm">
        <div class="step-content active" id="step1">
            <h2>Paso 1: Informaci√≥n General</h2>
            <div class="form-grid">
                <div>
                    <label>ID del Hallazgo *</label>
                    <input type="text" id="id_hallazgo" placeholder="Ej: 2026-ITAL-001" required>
                </div>
                <div>
                    <label>Tipo de Material</label>
                    <select id="tipo_hallazgo">
                        <option>Cer√°mica</option>
                        <option>Metal</option>
                        <option>Hueso / Antrop.</option>
                        <option>L√≠tico</option>
                        <option>Mosaico</option>
                    </select>
                </div>
                <div class="full-width">
                    <label>Descripci√≥n Inicial</label>
                    <textarea id="desc" rows="4" placeholder="Describe brevemente el objeto al ser encontrado..."></textarea>
                </div>
            </div>
        </div>

        <div class="step-content" id="step2">
            <h2>Paso 2: Ubicaci√≥n Exacta</h2>
            <div class="form-grid">
                <div>
                    <label>Capa Estratigr√°fica (UE) *</label>
                    <input type="text" id="ue" placeholder="Ej: UE 105">
                </div>
                <div>
                    <label>Profundidad (cm)</label>
                    <input type="number" id="profundidad" placeholder="-120">
                </div>
                <div class="full-width">
                    <label>Coordenadas GPS / Sector</label>
                    <input type="text" id="gps" placeholder="Sector B - Cuadro 4 - X:12 Y:45">
                </div>
            </div>
        </div>

        <div class="step-content" id="step3">
            <h2>Paso 3: An√°lisis T√©cnico</h2>
            <div class="form-grid">
                <div>
                    <label>Dimensiones (mm)</label>
                    <input type="text" id="dim" placeholder="60x40x10">
                </div>
                <div>
                    <label>Peso (g)</label>
                    <input type="number" id="peso">
                </div>
                <div class="full-width">
                    <label>Interpretaci√≥n Cient√≠fica Preliminar</label>
                    <textarea id="interp" rows="4"></textarea>
                </div>
            </div>
        </div>

        <div class="step-content" id="step4">
            <h2>Paso 4: Conservaci√≥n y Env√≠o</h2>
            <div class="form-grid">
                <div>
                    <label>Estado de Conservaci√≥n</label>
                    <select id="conservacion">
                        <option>Excelente</option>
                        <option>Bueno</option>
                        <option>Regular</option>
                        <option>Cr√≠tico</option>
                    </select>
                </div>
                <div>
                    <label>Lugar de Destino</label>
                    <input type="text" id="destino" placeholder="Museo Arqueol√≥gico / Lab">
                </div>
            </div>
        </div>

        <div class="wizard-footer">
            <button type="button" class="btn btn-prev" id="prevBtn" onclick="changeStep(-1)" disabled>Anterior</button>
            <button type="button" class="btn btn-next" id="nextBtn" onclick="changeStep(1)">Siguiente</button>
        </div>
    </form>
</div>

<div class="history-section">
    <h3>üìã √öltimos registros completados</h3>
    <table>
        <thead>
            <tr>
                <th>Imagen</th>
                <th>ID Hallazgo</th>
                <th>Tipo / Material</th>
                <th>Contexto (UE)</th>
                <th>Estado</th>
            </tr>
        </thead>
        <tbody id="historial">
            <tr>
                <td><img src="https://images.unsplash.com/photo-1549413216-438997ca96a6?auto=format&fit=crop&w=100" class="thumb-img"></td>
                <td><strong>#2026-ITAL-005</strong></td>
                <td>Mosaico Policromado</td>
                <td>UE 204</td>
                <td><span class="status-tag tag-finalizado">‚úÖ Finalizado</span></td>
            </tr>
            <tr>
                <td><img src="https://images.unsplash.com/photo-1599599810694-b5b37304c041?auto=format&fit=crop&w=100" class="thumb-img"></td>
                <td><strong>#2026-ITAL-006</strong></td>
                <td>F√≠bula de Bronce</td>
                <td>UE 108</td>
                <td><span class="status-tag tag-finalizado">‚úÖ Finalizado</span></td>
            </tr>
            <tr>
                <td><img src="https://images.unsplash.com/photo-1628153325000-8809e6d78ecf?auto=format&fit=crop&w=100" class="thumb-img"></td>
                <td><strong>#2026-ITAL-007</strong></td>
                <td>Bifaz de S√≠lex</td>
                <td>UE 002</td>
                <td><span class="status-tag tag-finalizado">‚úÖ Finalizado</span></td>
            </tr>
            <tr>
                <td><img src="https://images.unsplash.com/photo-1551009175-15bdf9dcb580?auto=format&fit=crop&w=100" class="thumb-img"></td>
                <td><strong>#2026-ITAL-008</strong></td>
                <td>Restos √ìseos (F√©mur)</td>
                <td>UE 310</td>
                <td><span class="status-tag tag-finalizado">‚úÖ Finalizado</span></td>
            </tr>
        </tbody>
    </table>
</div>

<script>
    let currentStep = 1;
    const totalSteps = 4;

    function changeStep(n) {
        if (n === 1) {
            const inputs = document.getElementById(`step${currentStep}`).querySelectorAll('input[required]');
            let valid = true;
            inputs.forEach(input => { 
                if(!input.value) { 
                    valid = false; 
                    input.style.borderColor = 'red'; 
                } else { 
                    input.style.borderColor = '#ddd'; 
                } 
            });
            if (!valid) { alert("Por favor, rellena los campos obligatorios."); return; }
        }

        document.getElementById(`step${currentStep}`).classList.remove('active');
        currentStep += n;

        if (currentStep > totalSteps) {
            saveData();
            return;
        }

        document.getElementById(`step${currentStep}`).classList.add('active');
        document.getElementById('progress').style.width = (currentStep / totalSteps) * 100 + "%";
        document.getElementById('prevBtn').disabled = (currentStep === 1);
        document.getElementById('nextBtn').innerText = (currentStep === totalSteps) ? "Finalizar y Subir" : "Siguiente";
    }

    function saveData() {
        const id = document.getElementById('id_hallazgo').value;
        const tipo = document.getElementById('tipo_hallazgo').value;
        const ue = document.getElementById('ue').value;

        const tabla = document.getElementById('historial');
        const fila = `<tr>
            <td><div style="width:50px; height:50px; background:#eee; display:flex; align-items:center; justify-content:center; border-radius:6px;">üè∫</div></td>
            <td><strong>#${id}</strong></td>
            <td>${tipo}</td>
            <td>${ue}</td>
            <td><span class="status-tag tag-finalizado">‚úÖ Reci√©n subido</span></td>
        </tr>`;
        tabla.innerHTML = fila + tabla.innerHTML;

        alert("¬°Registro cient√≠fico guardado con √©xito!");
        currentStep = 1;
        document.getElementById('arqueoForm').reset();
        document.getElementById('step1').classList.add('active');
        document.getElementById('progress').style.width = "25%";
        document.getElementById('prevBtn').disabled = true;
        document.getElementById('nextBtn').innerText = "Siguiente";
    }
</script>

</body>
</html>